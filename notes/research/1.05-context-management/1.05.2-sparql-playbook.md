# Jido SPARQL Query Playbook (v1.0)

This playbook defines **canonical SPARQL queries** for each major
JidoCode agent role. All queries assume the root ontology:

    owl:imports jido:JidoMemoryOntology

------------------------------------------------------------------------

## 1. Architect Agent Queries

### 1.1 All Active Architectural Decisions

``` sparql
SELECT ?decision ?summary WHERE {
  ?decision a jido:ArchitecturalDecision ;
            jido:summary ?summary ;
            jido:appliesToProject ?project .
  FILTER NOT EXISTS { ?decision jido:supersededBy ?x }
}
```

------------------------------------------------------------------------

### 1.2 All Project-Wide Conventions

``` sparql
SELECT ?conv ?name ?level WHERE {
  ?conv a jido:Convention ;
        jido:conventionName ?name ;
        jido:hasEnforcementLevel ?level .
}
```

------------------------------------------------------------------------

### 1.3 All Known Architectural Risks

``` sparql
SELECT ?risk ?summary WHERE {
  ?risk a jido:Risk ;
        jido:summary ?summary .
}
```

------------------------------------------------------------------------

## 2. Planner Agent Queries

### 2.1 All Open Tasks

``` sparql
SELECT ?task ?summary ?status WHERE {
  ?task a jido:Task ;
        jido:summary ?summary ;
        jido:hasTaskStatus ?status .
  FILTER (?status != jido:Completed)
}
```

------------------------------------------------------------------------

### 2.2 Task Dependency Graph

``` sparql
SELECT ?task ?dependsOn WHERE {
  ?task jido:dependsOn ?dependsOn .
}
```

------------------------------------------------------------------------

### 2.3 Tasks Blocked by Other Tasks

``` sparql
SELECT ?task ?blocker WHERE {
  ?task jido:blockedBy ?blocker .
}
```

------------------------------------------------------------------------

## 3. Debugger Agent Queries

### 3.1 All Open Errors & Bugs

``` sparql
SELECT ?err ?summary ?severity WHERE {
  ?err a jido:Error ;
       jido:summary ?summary ;
       jido:severityLevel ?severity ;
       jido:hasErrorStatus ?status .
  FILTER (?status != jido:Resolved)
}
```

------------------------------------------------------------------------

### 3.2 Root Causes Without Linked Errors

``` sparql
SELECT ?root ?summary WHERE {
  ?root a jido:RootCause ;
        jido:summary ?summary .
  FILTER NOT EXISTS { ?err jido:hasRootCause ?root }
}
```

------------------------------------------------------------------------

### 3.3 Lessons Learned

``` sparql
SELECT ?lesson ?summary WHERE {
  ?lesson a jido:LessonLearned ;
          jido:summary ?summary .
}
```

------------------------------------------------------------------------

## 4. Memory Curator Agent Queries

### 4.1 All Facts with Confidence

``` sparql
SELECT ?fact ?summary ?confidence WHERE {
  ?fact a jido:Fact ;
        jido:summary ?summary ;
        jido:hasConfidence ?confidence .
}
```

------------------------------------------------------------------------

### 4.2 Contradictory Knowledge Detection

``` sparql
SELECT ?a ?b WHERE {
  ?e jido:contradicts ?a .
  ?e jido:contradicts ?b .
  FILTER (?a != ?b)
}
```

------------------------------------------------------------------------

### 4.3 Orphaned Memory Items (No Project)

``` sparql
SELECT ?item WHERE {
  ?item a jido:MemoryItem .
  FILTER NOT EXISTS { ?item jido:appliesToProject ?p }
}
```

------------------------------------------------------------------------

### 4.4 Superseded Items Without Successor Audit

``` sparql
SELECT ?old WHERE {
  ?old jido:supersededBy ?new .
  FILTER NOT EXISTS { ?new a jido:MemoryItem }
}
```

------------------------------------------------------------------------

## 5. Code Intelligence Agent Queries

### 5.1 All Elixir Modules

``` sparql
SELECT ?mod ?name WHERE {
  ?mod a jido:ElixirModule ;
       jido:moduleName ?name .
}
```

------------------------------------------------------------------------

### 5.2 All Commands and Events They Emit

``` sparql
SELECT ?cmd ?event WHERE {
  ?cmd a jido:Command ;
       jido:emitsEvent ?event .
}
```

------------------------------------------------------------------------

### 5.3 All Projections and the Events They Handle

``` sparql
SELECT ?proj ?event WHERE {
  ?event jido:handledByProjection ?proj .
}
```

------------------------------------------------------------------------

## 6. Governance & Compliance Queries

### 6.1 All Strictly Enforced Conventions

``` sparql
SELECT ?conv ?name WHERE {
  ?conv a jido:Convention ;
        jido:hasEnforcementLevel jido:Strict ;
        jido:conventionName ?name .
}
```

------------------------------------------------------------------------

### 6.2 All Agent Rules

``` sparql
SELECT ?rule ?summary WHERE {
  ?rule a jido:AgentRule ;
        jido:summary ?summary .
}
```

------------------------------------------------------------------------

## 7. Session Intelligence Queries

### 7.1 Active Work Sessions

``` sparql
SELECT ?session ?start WHERE {
  ?session a jido:WorkSession ;
           jido:hasStatus jido:Active ;
           jido:startedAt ?start .
}
```

------------------------------------------------------------------------

### 7.2 Session Continuity Chain

``` sparql
SELECT ?s1 ?s2 WHERE {
  ?s2 jido:continuesSession ?s1 .
}
```

------------------------------------------------------------------------

## 8. CI Validation & Sanity Queries

### 8.1 Memory Items Missing Confidence

``` sparql
SELECT ?item WHERE {
  ?item a jido:MemoryItem .
  FILTER NOT EXISTS { ?item jido:hasConfidence ?c }
}
```

------------------------------------------------------------------------

### 8.2 Decisions Without Rationale

``` sparql
SELECT ?decision WHERE {
  ?decision a jido:Decision .
  FILTER NOT EXISTS { ?decision jido:rationale ?r }
}
```

------------------------------------------------------------------------

### 8.3 Tasks Without Assigned Agent

``` sparql
SELECT ?task WHERE {
  ?task a jido:Task .
  FILTER NOT EXISTS { ?task jido:assignedTo ?a }
}
```

------------------------------------------------------------------------

## 9. Usage Guidelines

-   All agents must execute queries against **JidoMemoryOntology**
-   All CI pipelines must include sections 8.1 â†’ 8.3
-   All new agent roles must define a query section here

------------------------------------------------------------------------

## 10. Design Guarantee

This query playbook ensures:

-   Deterministic memory inspection
-   Zero hallucinated facts
-   Agent-aligned reasoning
-   Fully auditable project state

